<template>
  <require from="./player"></require>
  <section show.bind="GameOver === false">
    <div class="row ">
      <!-- Can this get moved into it's own view / model? I can't get the change binding to work right now -->
      <button repeat.for="difficultyLevel of DifficultyLevels"
              class="col-xs-4 btn btn-default"
              click.delegate="$parent.ChangeDifficultyLevel(difficultyLevel)">${difficultyLevel.Name}</button>
      </div>
    <div class="row">
      <require from="./day"></require>
      <day max_days.bind="CurrentDayOption.TotalDays" current_day.bind="CurrentDay" is_last_day.bind="IsLastDay"></day>
    </div>
    <div class="row">
      <player player_info.bind="Player"></player>
    </div>
    <div class="row">
      <require from="./city-list"></require>
      <city-list current_city.bind="Cities[CurrentCityIndex]" drugs.bind="Drugs"></city-list>
      <div class="col-xs-6">
        <!-- Can this get moved into it's own view / model? I can't get the change binding to work right now -->
        <h2>Travel to</h2>
        <div class="row" repeat.for="city of Cities">
          <button class="btn btn-default ${$index == $parent.CurrentCityIndex ? 'active' : ''}"
                  click.delegate="$parent.MoveCity($index)">${city.Name}</button>
        </div>
      </div>
    </div>
  </section>
  <section show.bind="GameOver">
    <div class="splash">
      <div class="message">Game Over</div>
      <require from="./converters/currency-format"></require>
      <div class="message">You made ${Player.Money | currencyFormat}</div>
    </div>
  </section>
</template>
