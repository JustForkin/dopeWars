<template>
  <require from='./nav-bar'></require>
  <nav-bar day_options.bind="DayOptions"
           current_day_option.bind="CurrentDayOption"
           difficulty_levels.bind="DifficultyLevels"
           current_difficulty_level.bind="CurrentDifficultyLevel"
           game_engine.bind="Engine"></nav-bar>
  <require from="./player"></require>
  <section show.bind="GameOver === false">
    <div class="row">
      <require from="./day"></require>
      <day max_days.bind="CurrentDayOption.TotalDays" current_day.bind="CurrentDay" is_last_day.bind="IsLastDay"></day>
    </div>
    <div class="row">
      <player player_info.bind="Player"></player>
    </div>
    <div class="row">
      <require from="./city-list"></require>
      <city-list class="col-xs-6"
                 current_city.bind="Cities[CurrentCityIndex]"
                 drugs.bind="Drugs"
                 drugs_available.bind="DrugsAvailable"></city-list>
      <div class="col-xs-6">
        <!-- Can this get moved into it's own view / model? I can't get the change binding to work right now -->
        <h1>Travel to</h1>
        <button repeat.for="city of Cities"
                class="btn btn-default btn-block ${$index == $parent.CurrentCityIndex ? 'active' : ''}"
                click.delegate="$parent.MoveCity($index)">${city.Name}</button>
      </div>
    </div>
  </section>
  <section show.bind="GameOver">
    <div class="splash">
      <div class="message">Game Over</div>
      <require from="./converters/currency-format"></require>
      <div class="message">You made ${Player.Money | currencyFormat}</div>
    </div>
  </section>
</template>
